version: "3.9"
services:
db:
image: postgres:16-alpine
environment:
POSTGRES_DB: twitter
POSTGRES_USER: postgres
POSTGRES_PASSWORD: postgres
ports:
- "5432:5432"
volumes:
- pgdata:/var/lib/postgresql/data
healthcheck:
test: ["CMD-SHELL", "pg_isready -U postgres -d twitter"]
interval: 5s
timeout: 5s
retries: 10


redis:
image: redis:7-alpine
ports:
- "6379:6379"
command: ["redis-server", "--appendonly", "yes"]
volumes:
- redisdata:/data


volumes:
pgdata:
redisdata:
